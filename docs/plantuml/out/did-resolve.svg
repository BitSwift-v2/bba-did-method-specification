<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1347px" preserveAspectRatio="none" style="width:979px;height:1347px;" version="1.1" viewBox="0 0 979 1347" width="979px" zoomAndPan="magnify"><defs><filter height="300%" id="frplmvsl4ir1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#F5F5F5" height="1332.043" style="stroke: #A80036; stroke-width: 1.0;" width="553" x="398.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="115" x="617.5" y="16.5684">Ardor Blockchain</text><rect fill="#FFFFFF" filter="url(#frplmvsl4ir1)" height="662.4766" style="stroke: #000000; stroke-width: 2.0;" width="674" x="137.5" y="188.7305"/><rect fill="#FFFFFF" filter="url(#frplmvsl4ir1)" height="193.1738" style="stroke: #000000; stroke-width: 2.0;" width="644" x="157.5" y="213.041"/><rect fill="#FFFFFF" height="88.9316" style="stroke: none; stroke-width: 1.0;" width="644" x="157.5" y="317.2832"/><rect fill="#FFFFFF" filter="url(#frplmvsl4ir1)" height="205.8184" style="stroke: #000000; stroke-width: 2.0;" width="269" x="147.5" y="564.7676"/><rect fill="#FFFFFF" filter="url(#frplmvsl4ir1)" height="116.8867" style="stroke: #000000; stroke-width: 2.0;" width="252" x="157.5" y="646.6992"/><rect fill="#FFFFFF" height="57.2656" style="stroke: none; stroke-width: 1.0;" width="252" x="157.5" y="706.3203"/><rect fill="#FFFFFF" filter="url(#frplmvsl4ir1)" height="59.6211" style="stroke: #000000; stroke-width: 2.0;" width="225" x="157.5" y="784.5859"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="66" x2="66" y1="58.7988" y2="1297.5547"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="234.5" x2="234.5" y1="58.7988" y2="1297.5547"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="454.5" x2="454.5" y1="58.7988" y2="1297.5547"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="584.5" x2="584.5" y1="58.7988" y2="1297.5547"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="727.5" x2="727.5" y1="58.7988" y2="1297.5547"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="874.5" x2="874.5" y1="58.7988" y2="1297.5547"/><rect fill="#FEFECE" filter="url(#frplmvsl4ir1)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="23" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="30" y="43.8457">Requester</text><rect fill="#FEFECE" filter="url(#frplmvsl4ir1)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="23" y="1296.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="30" y="1317.0898">Requester</text><rect fill="#FEFECE" filter="url(#frplmvsl4ir1)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="182.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="189.5" y="43.8457">DID Resolver</text><rect fill="#FEFECE" filter="url(#frplmvsl4ir1)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="182.5" y="1296.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="189.5" y="1317.0898">DID Resolver</text><rect fill="#FEFECE" filter="url(#frplmvsl4ir1)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="417.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="424.5" y="43.8457">Account</text><rect fill="#FEFECE" filter="url(#frplmvsl4ir1)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="417.5" y="1296.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="424.5" y="1317.0898">Account</text><rect fill="#FEFECE" filter="url(#frplmvsl4ir1)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="531.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="538.5" y="43.8457">New Account</text><rect fill="#FEFECE" filter="url(#frplmvsl4ir1)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="531.5" y="1296.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="538.5" y="1317.0898">New Account</text><rect fill="#FEFECE" filter="url(#frplmvsl4ir1)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="678.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="685.5" y="43.8457">Tx Resolver</text><rect fill="#FEFECE" filter="url(#frplmvsl4ir1)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="678.5" y="1296.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="685.5" y="1317.0898">Tx Resolver</text><rect fill="#FEFECE" filter="url(#frplmvsl4ir1)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="816.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="823.5" y="43.8457">Cloud Storage</text><rect fill="#FEFECE" filter="url(#frplmvsl4ir1)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="816.5" y="1296.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="823.5" y="1317.0898">Cloud Storage</text><polygon fill="#A80036" points="222.5,101.4199,232.5,105.4199,222.5,109.4199,226.5,105.4199" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="228.5" y1="105.4199" y2="105.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="73.5" y="85.3672">request DID Document</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="73.5" y="100.6777">(did:bba:&lt;txh_d&gt;)</text><rect fill="#EEEEEE" filter="url(#frplmvsl4ir1)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="964.5" x="3" y="159.0752"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="967.5" y1="159.0752" y2="159.0752"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="967.5" y1="162.0752" y2="162.0752"/><rect fill="#EEEEEE" filter="url(#frplmvsl4ir1)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="184" x="393.25" y="148.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="166" x="399.25" y="164.9883">DID Attestation Retrieval</text><path d="M137.5,188.7305 L211.5,188.7305 L211.5,195.7305 L201.5,205.7305 L137.5,205.7305 L137.5,188.7305 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="662.4766" style="stroke: #000000; stroke-width: 2.0;" width="674" x="137.5" y="188.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="152.5" y="202.2988">loop</text><path d="M157.5,213.041 L219.5,213.041 L219.5,220.041 L209.5,230.041 L157.5,230.041 L157.5,213.041 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="193.1738" style="stroke: #000000; stroke-width: 2.0;" width="644" x="157.5" y="213.041"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="172.5" y="226.6094">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="234.5" y="225.6758">[is first iteration]</text><polygon fill="#A80036" points="715.5,247.6621,725.5,251.6621,715.5,255.6621,719.5,251.6621" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="721.5" y1="251.6621" y2="251.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="241.5" y="246.9199">get transaction (txh_d)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="276.5" y1="296.2832" y2="296.2832"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="276.5" x2="276.5" y1="296.2832" y2="309.2832"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="235.5" x2="276.5" y1="309.2832" y2="309.2832"/><polygon fill="#A80036" points="245.5,305.2832,235.5,309.2832,245.5,313.2832,241.5,309.2832" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="241.5" y="276.2305">check if transaction is</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="245.5" y="291.541">DID attestation</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="157.5" x2="801.5" y1="318.2832" y2="318.2832"/><polygon fill="#A80036" points="573,336.5938,583,340.5938,573,344.5938,577,340.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="579" y1="340.5938" y2="340.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="241.5" y="335.8516">get initial DID attestation</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="276.5" y1="385.2148" y2="385.2148"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="276.5" x2="276.5" y1="385.2148" y2="398.2148"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="235.5" x2="276.5" y1="398.2148" y2="398.2148"/><polygon fill="#A80036" points="245.5,394.2148,235.5,398.2148,245.5,402.2148,241.5,398.2148" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="241.5" y="365.1621">treat new account</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="241.5" y="380.4727">as current account</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="276.5" y1="434.5254" y2="434.5254"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="276.5" x2="276.5" y1="434.5254" y2="447.5254"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="235.5" x2="276.5" y1="447.5254" y2="447.5254"/><polygon fill="#A80036" points="245.5,443.5254,235.5,447.5254,245.5,451.5254,241.5,447.5254" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="241.5" y="429.7832">check if DID attestation is active</text><polygon fill="#A80036" points="442.5,488.1465,452.5,492.1465,442.5,496.1465,446.5,492.1465" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="448.5" y1="492.1465" y2="492.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="241.5" y="472.0938">get newer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="241.5" y="487.4043">DID attestations</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="276.5" y1="536.7676" y2="536.7676"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="276.5" x2="276.5" y1="536.7676" y2="549.7676"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="235.5" x2="276.5" y1="549.7676" y2="549.7676"/><polygon fill="#A80036" points="245.5,545.7676,235.5,549.7676,245.5,553.7676,241.5,549.7676" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="241.5" y="516.7148">sort DID attestations</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="241.5" y="532.0254">from oldest to newest</text><path d="M147.5,564.7676 L221.5,564.7676 L221.5,571.7676 L211.5,581.7676 L147.5,581.7676 L147.5,564.7676 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="205.8184" style="stroke: #000000; stroke-width: 2.0;" width="269" x="147.5" y="564.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="162.5" y="578.3359">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127" x="236.5" y="577.4023">[over DID attestations]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="276.5" y1="618.6992" y2="618.6992"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="276.5" x2="276.5" y1="618.6992" y2="631.6992"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="235.5" x2="276.5" y1="631.6992" y2="631.6992"/><polygon fill="#A80036" points="245.5,627.6992,235.5,631.6992,245.5,635.6992,241.5,631.6992" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="241.5" y="598.6465">treat DID attestation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="241.5" y="613.957">as current DID attestation</text><path d="M157.5,646.6992 L219.5,646.6992 L219.5,653.6992 L209.5,663.6992 L157.5,663.6992 L157.5,646.6992 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="116.8867" style="stroke: #000000; stroke-width: 2.0;" width="252" x="157.5" y="646.6992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="172.5" y="660.2676">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="170" x="234.5" y="659.334">[is DID attestation deprecated]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="276.5" y1="685.3203" y2="685.3203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="276.5" x2="276.5" y1="685.3203" y2="698.3203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="235.5" x2="276.5" y1="698.3203" y2="698.3203"/><polygon fill="#A80036" points="245.5,694.3203,235.5,698.3203,245.5,702.3203,241.5,698.3203" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="241.5" y="680.5781">break loop</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="157.5" x2="409.5" y1="707.3203" y2="707.3203"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="173" x="162.5" y="717.9551">[is DID attestation deactivated]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="276.5" y1="742.5859" y2="742.5859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="276.5" x2="276.5" y1="742.5859" y2="755.5859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="235.5" x2="276.5" y1="755.5859" y2="755.5859"/><polygon fill="#A80036" points="245.5,751.5859,235.5,755.5859,245.5,759.5859,241.5,755.5859" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="241.5" y="737.8438">stop DID resolution</text><path d="M157.5,784.5859 L219.5,784.5859 L219.5,791.5859 L209.5,801.5859 L157.5,801.5859 L157.5,784.5859 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="59.6211" style="stroke: #000000; stroke-width: 2.0;" width="225" x="157.5" y="784.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="172.5" y="798.1543">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="143" x="234.5" y="797.2207">[is DID attestation active]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="276.5" y1="823.207" y2="823.207"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="276.5" x2="276.5" y1="823.207" y2="836.207"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="235.5" x2="276.5" y1="836.207" y2="836.207"/><polygon fill="#A80036" points="245.5,832.207,235.5,836.207,245.5,840.207,241.5,836.207" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="241.5" y="818.4648">break loop</text><rect fill="#EEEEEE" filter="url(#frplmvsl4ir1)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="964.5" x="3" y="911.5176"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="967.5" y1="911.5176" y2="911.5176"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="967.5" y1="914.5176" y2="914.5176"/><rect fill="#EEEEEE" filter="url(#frplmvsl4ir1)" height="38.6211" style="stroke: #000000; stroke-width: 2.0;" width="243" x="363.75" y="893.207"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="229" x="369.75" y="909.7754">DID Document Template Retrieval</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147" x="408.75" y="925.0859">(Ardor Cloud Storage)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="276.5" y1="978.4492" y2="978.4492"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="276.5" x2="276.5" y1="978.4492" y2="991.4492"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="235.5" x2="276.5" y1="991.4492" y2="991.4492"/><polygon fill="#A80036" points="245.5,987.4492,235.5,991.4492,245.5,995.4492,241.5,991.4492" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="241.5" y="958.3965">extract cloud storage</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="241.5" y="973.707">tx hash (txh_s)</text><polygon fill="#A80036" points="862.5,1032.0703,872.5,1036.0703,862.5,1040.0703,866.5,1036.0703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="868.5" y1="1036.0703" y2="1036.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="241.5" y="1016.0176">get DID Document</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="241.5" y="1031.3281">Template (txh_s)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="276.5" y1="1111.3125" y2="1111.3125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="276.5" x2="276.5" y1="1111.3125" y2="1124.3125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="235.5" x2="276.5" y1="1124.3125" y2="1124.3125"/><polygon fill="#A80036" points="245.5,1120.3125,235.5,1124.3125,245.5,1128.3125,241.5,1124.3125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="241.5" y="1060.6387">check if DID Document</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="241.5" y="1075.9492">Template is self-set</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="241.5" y="1091.2598">(by one of the found</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="241.5" y="1106.5703">DID controllers)</text><rect fill="#EEEEEE" filter="url(#frplmvsl4ir1)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="964.5" x="3" y="1177.9678"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="967.5" y1="1177.9678" y2="1177.9678"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="967.5" y1="1180.9678" y2="1180.9678"/><rect fill="#EEEEEE" filter="url(#frplmvsl4ir1)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="198" x="386.25" y="1167.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="392.25" y="1183.8809">DID Document Preparation</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="276.5" y1="1237.2441" y2="1237.2441"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="276.5" x2="276.5" y1="1237.2441" y2="1250.2441"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="235.5" x2="276.5" y1="1250.2441" y2="1250.2441"/><polygon fill="#A80036" points="245.5,1246.2441,235.5,1250.2441,245.5,1254.2441,241.5,1250.2441" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="241.5" y="1217.1914">add DID informations to the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="241.5" y="1232.502">DID Document Template</text><polygon fill="#A80036" points="77.5,1275.5547,67.5,1279.5547,77.5,1283.5547,73.5,1279.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="71.5" x2="233.5" y1="1279.5547" y2="1279.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="83.5" y="1274.8125">return DID Document</text><!--MD5=[f46c8d482ba320bf04c779c64c9061e0]
@startuml
skinparam BoxPadding 15
skinparam ParticipantPadding 15


participant "Requester" as REQ
participant "DID Resolver" as RES
box "Ardor Blockchain" #WhiteSmoke
    participant "Account" as ATTE
    participant "New Account" as NATTE
    participant "Tx Resolver" as TXR
    participant "Cloud Storage" as STR
end box



REQ -> RES: request DID Document\n(did:bba:<txh_d>)
|||


== DID Attestation Retrieval ==

loop
    alt is first iteration
        RES -> TXR: get transaction (txh_d)
        RES -> RES: check if transaction is\n DID attestation
    else
        ' RES -> RES: store account name
        RES -> NATTE: get initial DID attestation
        RES -> RES: treat new account\nas current account
    end

    RES -> RES: check if DID attestation is active
    RES -> ATTE: get newer \nDID attestations
    RES -> RES: sort DID attestations\nfrom oldest to newest

    loop over DID attestations
        RES -> RES: treat DID attestation\nas current DID attestation
        alt is DID attestation deprecated
            RES -> RES: break loop
        else is DID attestation deactivated
            RES -> RES: stop DID resolution
        end
    end
    alt is DID attestation active
        RES -> RES: break loop
    end
end
|||


== DID Document Template Retrieval\n(Ardor Cloud Storage) ==

RES -> RES: extract cloud storage\ntx hash (txh_s)
RES -> STR: get DID Document\nTemplate (txh_s)
RES -> RES: check if DID Document\nTemplate is self-set\n(by one of the found\nDID controllers)
|||


== DID Document Preparation ==

RES -> RES: add DID informations to the\nDID Document Template
RES -> REQ: return DID Document


@enduml

@startuml
skinparam BoxPadding 15
skinparam ParticipantPadding 15


participant "Requester" as REQ
participant "DID Resolver" as RES
box "Ardor Blockchain" #WhiteSmoke
    participant "Account" as ATTE
    participant "New Account" as NATTE
    participant "Tx Resolver" as TXR
    participant "Cloud Storage" as STR
end box



REQ -> RES: request DID Document\n(did:bba:<txh_d>)
|||


== DID Attestation Retrieval ==

loop
    alt is first iteration
        RES -> TXR: get transaction (txh_d)
        RES -> RES: check if transaction is\n DID attestation
    else
        RES -> NATTE: get initial DID attestation
        RES -> RES: treat new account\nas current account
    end

    RES -> RES: check if DID attestation is active
    RES -> ATTE: get newer \nDID attestations
    RES -> RES: sort DID attestations\nfrom oldest to newest

    loop over DID attestations
        RES -> RES: treat DID attestation\nas current DID attestation
        alt is DID attestation deprecated
            RES -> RES: break loop
        else is DID attestation deactivated
            RES -> RES: stop DID resolution
        end
    end
    alt is DID attestation active
        RES -> RES: break loop
    end
end
|||


== DID Document Template Retrieval\n(Ardor Cloud Storage) ==

RES -> RES: extract cloud storage\ntx hash (txh_s)
RES -> STR: get DID Document\nTemplate (txh_s)
RES -> RES: check if DID Document\nTemplate is self-set\n(by one of the found\nDID controllers)
|||


== DID Document Preparation ==

RES -> RES: add DID informations to the\nDID Document Template
RES -> REQ: return DID Document


@enduml

PlantUML version 1.2020.10(Sun May 17 11:35:57 CEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.7+10
Operating System: Mac OS X
Default Encoding: UTF-8
Language: en
Country: DE
--></g></svg>