<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1228px" preserveAspectRatio="none" style="width:1050px;height:1228px;" version="1.1" viewBox="0 0 1050 1228" width="1050px" zoomAndPan="magnify"><defs><filter height="300%" id="fv84cmlgf8hxw" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#F5F5F5" height="1213.1797" style="stroke: #A80036; stroke-width: 1.0;" width="553" x="469.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125" x="683.5" y="16.5684">ARDOR Blockchain</text><rect fill="#FFFFFF" filter="url(#fv84cmlgf8hxw)" height="604.8555" style="stroke: #000000; stroke-width: 2.0;" width="746" x="136.5" y="188.7305"/><rect fill="#FFFFFF" filter="url(#fv84cmlgf8hxw)" height="193.1738" style="stroke: #000000; stroke-width: 2.0;" width="716" x="156.5" y="213.041"/><rect fill="#FFFFFF" height="88.9316" style="stroke: none; stroke-width: 1.0;" width="716" x="156.5" y="317.2832"/><rect fill="#FFFFFF" filter="url(#fv84cmlgf8hxw)" height="205.8184" style="stroke: #000000; stroke-width: 2.0;" width="276" x="146.5" y="507.1465"/><rect fill="#FFFFFF" filter="url(#fv84cmlgf8hxw)" height="116.8867" style="stroke: #000000; stroke-width: 2.0;" width="252" x="156.5" y="589.0781"/><rect fill="#FFFFFF" height="57.2656" style="stroke: none; stroke-width: 1.0;" width="252" x="156.5" y="648.6992"/><rect fill="#FFFFFF" filter="url(#fv84cmlgf8hxw)" height="59.6211" style="stroke: #000000; stroke-width: 2.0;" width="225" x="156.5" y="726.9648"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="66" x2="66" y1="58.7988" y2="1178.6914"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="233.5" x2="233.5" y1="58.7988" y2="1178.6914"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="525.5" x2="525.5" y1="58.7988" y2="1178.6914"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="655.5" x2="655.5" y1="58.7988" y2="1178.6914"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="798.5" x2="798.5" y1="58.7988" y2="1178.6914"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="945.5" x2="945.5" y1="58.7988" y2="1178.6914"/><rect fill="#FEFECE" filter="url(#fv84cmlgf8hxw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="23" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="30" y="43.8457">Requester</text><rect fill="#FEFECE" filter="url(#fv84cmlgf8hxw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="23" y="1177.6914"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="30" y="1198.2266">Requester</text><rect fill="#FEFECE" filter="url(#fv84cmlgf8hxw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="181.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="188.5" y="43.8457">DID Resolver</text><rect fill="#FEFECE" filter="url(#fv84cmlgf8hxw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="181.5" y="1177.6914"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="188.5" y="1198.2266">DID Resolver</text><rect fill="#FEFECE" filter="url(#fv84cmlgf8hxw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="488.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="495.5" y="43.8457">Account</text><rect fill="#FEFECE" filter="url(#fv84cmlgf8hxw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="488.5" y="1177.6914"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="495.5" y="1198.2266">Account</text><rect fill="#FEFECE" filter="url(#fv84cmlgf8hxw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="602.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="609.5" y="43.8457">New Account</text><rect fill="#FEFECE" filter="url(#fv84cmlgf8hxw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="602.5" y="1177.6914"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="609.5" y="1198.2266">New Account</text><rect fill="#FEFECE" filter="url(#fv84cmlgf8hxw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="749.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="756.5" y="43.8457">Tx Resolver</text><rect fill="#FEFECE" filter="url(#fv84cmlgf8hxw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="749.5" y="1177.6914"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="756.5" y="1198.2266">Tx Resolver</text><rect fill="#FEFECE" filter="url(#fv84cmlgf8hxw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="887.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="894.5" y="43.8457">Cloud Storage</text><rect fill="#FEFECE" filter="url(#fv84cmlgf8hxw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="887.5" y="1177.6914"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="894.5" y="1198.2266">Cloud Storage</text><polygon fill="#A80036" points="221.5,101.4199,231.5,105.4199,221.5,109.4199,225.5,105.4199" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="227.5" y1="105.4199" y2="105.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="73.5" y="85.3672">request DID resolution</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="73.5" y="100.6777">(did:bba:&lt;txh_d&gt;)</text><rect fill="#EEEEEE" filter="url(#fv84cmlgf8hxw)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1035.5" x="3" y="159.0752"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1038.5" y1="159.0752" y2="159.0752"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1038.5" y1="162.0752" y2="162.0752"/><rect fill="#EEEEEE" filter="url(#fv84cmlgf8hxw)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="184" x="428.75" y="148.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="166" x="434.75" y="164.9883">DID Attestation Retrieval</text><path d="M136.5,188.7305 L210.5,188.7305 L210.5,195.7305 L200.5,205.7305 L136.5,205.7305 L136.5,188.7305 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="604.8555" style="stroke: #000000; stroke-width: 2.0;" width="746" x="136.5" y="188.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="151.5" y="202.2988">loop</text><path d="M156.5,213.041 L218.5,213.041 L218.5,220.041 L208.5,230.041 L156.5,230.041 L156.5,213.041 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="193.1738" style="stroke: #000000; stroke-width: 2.0;" width="716" x="156.5" y="213.041"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="171.5" y="226.6094">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="233.5" y="225.6758">[is first iteration]</text><polygon fill="#A80036" points="786.5,247.6621,796.5,251.6621,786.5,255.6621,790.5,251.6621" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="792.5" y1="251.6621" y2="251.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="240.5" y="246.9199">get transaction (txh_d)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="275.5" y1="296.2832" y2="296.2832"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275.5" x2="275.5" y1="296.2832" y2="309.2832"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="275.5" y1="309.2832" y2="309.2832"/><polygon fill="#A80036" points="244.5,305.2832,234.5,309.2832,244.5,313.2832,240.5,309.2832" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="240.5" y="276.2305">check if transaction is</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="244.5" y="291.541">DID attestation</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="156.5" x2="872.5" y1="318.2832" y2="318.2832"/><polygon fill="#A80036" points="644,336.5938,654,340.5938,644,344.5938,648,340.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="650" y1="340.5938" y2="340.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="240.5" y="335.8516">get initial DID attestation</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="275.5" y1="385.2148" y2="385.2148"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275.5" x2="275.5" y1="385.2148" y2="398.2148"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="275.5" y1="398.2148" y2="398.2148"/><polygon fill="#A80036" points="244.5,394.2148,234.5,398.2148,244.5,402.2148,240.5,398.2148" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="240.5" y="365.1621">treat new account</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="240.5" y="380.4727">as current account</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="275.5" y1="434.5254" y2="434.5254"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275.5" x2="275.5" y1="434.5254" y2="447.5254"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="275.5" y1="447.5254" y2="447.5254"/><polygon fill="#A80036" points="244.5,443.5254,234.5,447.5254,244.5,451.5254,240.5,447.5254" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="240.5" y="429.7832">check if DID attestation is active</text><polygon fill="#A80036" points="513.5,488.1465,523.5,492.1465,513.5,496.1465,517.5,492.1465" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="519.5" y1="492.1465" y2="492.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="240.5" y="472.0938">get newer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="240.5" y="487.4043">DID attestations</text><path d="M146.5,507.1465 L220.5,507.1465 L220.5,514.1465 L210.5,524.1465 L146.5,524.1465 L146.5,507.1465 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="205.8184" style="stroke: #000000; stroke-width: 2.0;" width="276" x="146.5" y="507.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="161.5" y="520.7148">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="164" x="235.5" y="519.7813">[over found DID attestations]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="275.5" y1="561.0781" y2="561.0781"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275.5" x2="275.5" y1="561.0781" y2="574.0781"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="275.5" y1="574.0781" y2="574.0781"/><polygon fill="#A80036" points="244.5,570.0781,234.5,574.0781,244.5,578.0781,240.5,574.0781" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="240.5" y="541.0254">treat found DID attestation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="240.5" y="556.3359">as current DID attestation</text><path d="M156.5,589.0781 L218.5,589.0781 L218.5,596.0781 L208.5,606.0781 L156.5,606.0781 L156.5,589.0781 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="116.8867" style="stroke: #000000; stroke-width: 2.0;" width="252" x="156.5" y="589.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="171.5" y="602.6465">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="170" x="233.5" y="601.7129">[is DID attestation deprecated]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="275.5" y1="627.6992" y2="627.6992"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275.5" x2="275.5" y1="627.6992" y2="640.6992"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="275.5" y1="640.6992" y2="640.6992"/><polygon fill="#A80036" points="244.5,636.6992,234.5,640.6992,244.5,644.6992,240.5,640.6992" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="240.5" y="622.957">break loop</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="156.5" x2="408.5" y1="649.6992" y2="649.6992"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="173" x="161.5" y="660.334">[is DID attestation deactivated]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="275.5" y1="684.9648" y2="684.9648"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275.5" x2="275.5" y1="684.9648" y2="697.9648"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="275.5" y1="697.9648" y2="697.9648"/><polygon fill="#A80036" points="244.5,693.9648,234.5,697.9648,244.5,701.9648,240.5,697.9648" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="240.5" y="680.2227">stop DID resolution</text><path d="M156.5,726.9648 L218.5,726.9648 L218.5,733.9648 L208.5,743.9648 L156.5,743.9648 L156.5,726.9648 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="59.6211" style="stroke: #000000; stroke-width: 2.0;" width="225" x="156.5" y="726.9648"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="171.5" y="740.5332">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="143" x="233.5" y="739.5996">[is DID attestation active]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="275.5" y1="765.5859" y2="765.5859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275.5" x2="275.5" y1="765.5859" y2="778.5859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="275.5" y1="778.5859" y2="778.5859"/><polygon fill="#A80036" points="244.5,774.5859,234.5,778.5859,244.5,782.5859,240.5,778.5859" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="240.5" y="760.8438">break loop</text><rect fill="#EEEEEE" filter="url(#fv84cmlgf8hxw)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1035.5" x="3" y="853.8965"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1038.5" y1="853.8965" y2="853.8965"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1038.5" y1="856.8965" y2="856.8965"/><rect fill="#EEEEEE" filter="url(#fv84cmlgf8hxw)" height="38.6211" style="stroke: #000000; stroke-width: 2.0;" width="243" x="399.25" y="835.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="229" x="405.25" y="852.1543">DID Document Template Retrieval</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147" x="444.25" y="867.4648">(Ardor Cloud Storage)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="275.5" y1="905.5176" y2="905.5176"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275.5" x2="275.5" y1="905.5176" y2="918.5176"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="275.5" y1="918.5176" y2="918.5176"/><polygon fill="#A80036" points="244.5,914.5176,234.5,918.5176,244.5,922.5176,240.5,918.5176" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="240.5" y="900.7754">extract cloud storage tx hash (txh_s)</text><polygon fill="#A80036" points="933.5,943.8281,943.5,947.8281,933.5,951.8281,937.5,947.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="939.5" y1="947.8281" y2="947.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="240.5" y="943.0859">get DID Document Template (txh_s)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="275.5" y1="992.4492" y2="992.4492"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275.5" x2="275.5" y1="992.4492" y2="1005.4492"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="275.5" y1="1005.4492" y2="1005.4492"/><polygon fill="#A80036" points="244.5,1001.4492,234.5,1005.4492,244.5,1009.4492,240.5,1005.4492" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="278" x="240.5" y="972.3965">check if DID Document Template is self-set</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="240.5" y="987.707">(by one of the found DID controllers)</text><rect fill="#EEEEEE" filter="url(#fv84cmlgf8hxw)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1035.5" x="3" y="1059.1045"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1038.5" y1="1059.1045" y2="1059.1045"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1038.5" y1="1062.1045" y2="1062.1045"/><rect fill="#EEEEEE" filter="url(#fv84cmlgf8hxw)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="198" x="421.75" y="1048.4492"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="427.75" y="1065.0176">DID Document Preparation</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="275.5" y1="1118.3809" y2="1118.3809"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275.5" x2="275.5" y1="1118.3809" y2="1131.3809"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="275.5" y1="1131.3809" y2="1131.3809"/><polygon fill="#A80036" points="244.5,1127.3809,234.5,1131.3809,244.5,1135.3809,240.5,1131.3809" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="240.5" y="1098.3281">add DID informations to the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="240.5" y="1113.6387">DID Document Template</text><polygon fill="#A80036" points="77.5,1156.6914,67.5,1160.6914,77.5,1164.6914,73.5,1160.6914" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="71.5" x2="232.5" y1="1160.6914" y2="1160.6914"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="83.5" y="1155.9492">return DID Document</text><!--MD5=[551f2fd6f0de92475a8467a6d3430662]
@startuml
skinparam BoxPadding 15
skinparam ParticipantPadding 15


participant "Requester" as REQ
participant "DID Resolver" as RES
box "ARDOR Blockchain" #WhiteSmoke
    participant "Account" as ATTE
    participant "New Account" as NATTE
    participant "Tx Resolver" as TXR
    participant "Cloud Storage" as STR
end box



REQ -> RES: request DID resolution\n(did:bba:<txh_d>)
|||


== DID Attestation Retrieval ==

loop
    alt is first iteration
        RES -> TXR: get transaction (txh_d)
        RES -> RES: check if transaction is\n DID attestation
    else
        ' RES -> RES: store account name
        RES -> NATTE: get initial DID attestation
        RES -> RES: treat new account\nas current account
    end

    RES -> RES: check if DID attestation is active
    RES -> ATTE: get newer \nDID attestations

    loop over found DID attestations
        RES -> RES: treat found DID attestation\nas current DID attestation
        alt is DID attestation deprecated
            RES -> RES: break loop
        else is DID attestation deactivated
            RES -> RES: stop DID resolution
        end
    end
    alt is DID attestation active
        RES -> RES: break loop
    end
end
|||


== DID Document Template Retrieval\n(Ardor Cloud Storage) ==

RES -> RES: extract cloud storage tx hash (txh_s)
RES -> STR: get DID Document Template (txh_s)
RES -> RES: check if DID Document Template is self-set\n(by one of the found DID controllers)
|||


== DID Document Preparation ==

RES -> RES: add DID informations to the\nDID Document Template
RES -> REQ: return DID Document


@enduml

@startuml
skinparam BoxPadding 15
skinparam ParticipantPadding 15


participant "Requester" as REQ
participant "DID Resolver" as RES
box "ARDOR Blockchain" #WhiteSmoke
    participant "Account" as ATTE
    participant "New Account" as NATTE
    participant "Tx Resolver" as TXR
    participant "Cloud Storage" as STR
end box



REQ -> RES: request DID resolution\n(did:bba:<txh_d>)
|||


== DID Attestation Retrieval ==

loop
    alt is first iteration
        RES -> TXR: get transaction (txh_d)
        RES -> RES: check if transaction is\n DID attestation
    else
        RES -> NATTE: get initial DID attestation
        RES -> RES: treat new account\nas current account
    end

    RES -> RES: check if DID attestation is active
    RES -> ATTE: get newer \nDID attestations

    loop over found DID attestations
        RES -> RES: treat found DID attestation\nas current DID attestation
        alt is DID attestation deprecated
            RES -> RES: break loop
        else is DID attestation deactivated
            RES -> RES: stop DID resolution
        end
    end
    alt is DID attestation active
        RES -> RES: break loop
    end
end
|||


== DID Document Template Retrieval\n(Ardor Cloud Storage) ==

RES -> RES: extract cloud storage tx hash (txh_s)
RES -> STR: get DID Document Template (txh_s)
RES -> RES: check if DID Document Template is self-set\n(by one of the found DID controllers)
|||


== DID Document Preparation ==

RES -> RES: add DID informations to the\nDID Document Template
RES -> REQ: return DID Document


@enduml

PlantUML version 1.2020.10(Sun May 17 11:35:57 CEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.7+10
Operating System: Mac OS X
Default Encoding: UTF-8
Language: en
Country: DE
--></g></svg>