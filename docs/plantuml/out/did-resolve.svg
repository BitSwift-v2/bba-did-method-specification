<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1477px" preserveAspectRatio="none" style="width:1063px;height:1477px;" version="1.1" viewBox="0 0 1063 1477" width="1063px" zoomAndPan="magnify"><defs><filter height="300%" id="f1s37z6r22540o" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#F5F5F5" height="1462.4219" style="stroke: #A80036; stroke-width: 1.0;" width="553" x="482" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125" x="696" y="16.5684">ARDOR Blockchain</text><rect fill="#FFFFFF" filter="url(#f1s37z6r22540o)" height="872.0293" style="stroke: #000000; stroke-width: 2.0;" width="737" x="158" y="216.7305"/><rect fill="#FFFFFF" filter="url(#f1s37z6r22540o)" height="220.1738" style="stroke: #000000; stroke-width: 2.0;" width="707" x="178" y="241.041"/><rect fill="#FFFFFF" height="131.2422" style="stroke: none; stroke-width: 1.0;" width="707" x="178" y="329.9727"/><rect fill="#FFFFFF" filter="url(#f1s37z6r22540o)" height="190.5078" style="stroke: #000000; stroke-width: 2.0;" width="240" x="168" y="817.6309"/><rect fill="#FFFFFF" filter="url(#f1s37z6r22540o)" height="116.8867" style="stroke: #000000; stroke-width: 2.0;" width="220" x="178" y="884.252"/><rect fill="#FFFFFF" height="57.2656" style="stroke: none; stroke-width: 1.0;" width="220" x="178" y="943.873"/><rect fill="#FFFFFF" filter="url(#f1s37z6r22540o)" height="59.6211" style="stroke: #000000; stroke-width: 2.0;" width="184" x="178" y="1022.1387"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="57" x2="57" y1="58.7988" y2="1427.9336"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="255" x2="255" y1="58.7988" y2="1427.9336"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="538" x2="538" y1="58.7988" y2="1427.9336"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="668" x2="668" y1="58.7988" y2="1427.9336"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="811" x2="811" y1="58.7988" y2="1427.9336"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="958" x2="958" y1="58.7988" y2="1427.9336"/><rect fill="#FEFECE" filter="url(#f1s37z6r22540o)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="64" x="23" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="30" y="43.8457">Verifier</text><rect fill="#FEFECE" filter="url(#f1s37z6r22540o)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="64" x="23" y="1426.9336"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="30" y="1447.4688">Verifier</text><rect fill="#FEFECE" filter="url(#f1s37z6r22540o)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="203" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="210" y="43.8457">DID Resolver</text><rect fill="#FEFECE" filter="url(#f1s37z6r22540o)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="203" y="1426.9336"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="210" y="1447.4688">DID Resolver</text><rect fill="#FEFECE" filter="url(#f1s37z6r22540o)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="501" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="508" y="43.8457">Account</text><rect fill="#FEFECE" filter="url(#f1s37z6r22540o)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="501" y="1426.9336"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="508" y="1447.4688">Account</text><rect fill="#FEFECE" filter="url(#f1s37z6r22540o)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="615" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="622" y="43.8457">New Account</text><rect fill="#FEFECE" filter="url(#f1s37z6r22540o)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="615" y="1426.9336"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="622" y="1447.4688">New Account</text><rect fill="#FEFECE" filter="url(#f1s37z6r22540o)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="762" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="769" y="43.8457">Tx Resolver</text><rect fill="#FEFECE" filter="url(#f1s37z6r22540o)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="762" y="1426.9336"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="769" y="1447.4688">Tx Resolver</text><rect fill="#FEFECE" filter="url(#f1s37z6r22540o)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="900" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="907" y="43.8457">Cloud Storage</text><rect fill="#FEFECE" filter="url(#f1s37z6r22540o)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="900" y="1426.9336"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="907" y="1447.4688">Cloud Storage</text><rect fill="#EEEEEE" filter="url(#f1s37z6r22540o)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1048" x="3" y="89.4541"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1051" y1="89.4541" y2="89.4541"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1051" y1="92.4541" y2="92.4541"/><rect fill="#EEEEEE" filter="url(#f1s37z6r22540o)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="117" x="468.5" y="78.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="99" x="474.5" y="95.3672">DID Resolution</text><polygon fill="#A80036" points="243,129.4199,253,133.4199,243,137.4199,247,133.4199" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="57" x2="249" y1="133.4199" y2="133.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="64" y="128.6777">read DID (did:bba:&lt;txh_d&gt;)</text><rect fill="#EEEEEE" filter="url(#f1s37z6r22540o)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1048" x="3" y="187.0752"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1051" y1="187.0752" y2="187.0752"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1051" y1="190.0752" y2="190.0752"/><rect fill="#EEEEEE" filter="url(#f1s37z6r22540o)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="189" x="432.5" y="176.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="171" x="438.5" y="192.9883">parse DID Controller Path</text><path d="M158,216.7305 L232,216.7305 L232,223.7305 L222,233.7305 L158,233.7305 L158,216.7305 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="872.0293" style="stroke: #000000; stroke-width: 2.0;" width="737" x="158" y="216.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="173" y="230.2988">loop</text><path d="M178,241.041 L240,241.041 L240,248.041 L230,258.041 L178,258.041 L178,241.041 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="220.1738" style="stroke: #000000; stroke-width: 2.0;" width="707" x="178" y="241.041"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="193" y="254.6094">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="255" y="253.6758">[is first iteration]</text><polygon fill="#A80036" points="799,275.6621,809,279.6621,799,283.6621,803,279.6621" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="255" x2="805" y1="279.6621" y2="279.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="255" x="262" y="274.9199">get initial attestation transaction (txh_d)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="255" x2="297" y1="308.9727" y2="308.9727"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="297" x2="297" y1="308.9727" y2="321.9727"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="256" x2="297" y1="321.9727" y2="321.9727"/><polygon fill="#A80036" points="266,317.9727,256,321.9727,266,325.9727,262,321.9727" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="262" y="304.2305">store account name</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="178" x2="885" y1="330.9727" y2="330.9727"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="255" x2="297" y1="353.2832" y2="353.2832"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="297" x2="297" y1="353.2832" y2="366.2832"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="256" x2="297" y1="366.2832" y2="366.2832"/><polygon fill="#A80036" points="266,362.2832,256,366.2832,266,370.2832,262,366.2832" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="262" y="348.541">store account name</text><polygon fill="#A80036" points="656.5,391.5938,666.5,395.5938,656.5,399.5938,660.5,395.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="255" x2="662.5" y1="395.5938" y2="395.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="207" x="262" y="390.8516">get initial attestation transaction</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="255" x2="297" y1="440.2148" y2="440.2148"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="297" x2="297" y1="440.2148" y2="453.2148"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="256" x2="297" y1="453.2148" y2="453.2148"/><polygon fill="#A80036" points="266,449.2148,256,453.2148,266,457.2148,262,453.2148" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="262" y="420.1621">treat new account</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="262" y="435.4727">as current account</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="255" x2="297" y1="504.8359" y2="504.8359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="297" x2="297" y1="504.8359" y2="517.8359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="256" x2="297" y1="517.8359" y2="517.8359"/><polygon fill="#A80036" points="266,513.8359,256,517.8359,266,521.8359,262,517.8359" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="262" y="484.7832">check if tx is</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="262" y="500.0938">account property</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="255" x2="297" y1="562.457" y2="562.457"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="297" x2="297" y1="562.457" y2="575.457"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="256" x2="297" y1="575.457" y2="575.457"/><polygon fill="#A80036" points="266,571.457,256,575.457,266,579.457,262,575.457" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="262" y="542.4043">check if account</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="262" y="557.7148">property is self-set</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="255" x2="297" y1="620.0781" y2="620.0781"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="297" x2="297" y1="620.0781" y2="633.0781"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="256" x2="297" y1="633.0781" y2="633.0781"/><polygon fill="#A80036" points="266,629.0781,256,633.0781,266,637.0781,262,633.0781" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="262" y="600.0254">check account</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="262" y="615.3359">property name (didId)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="255" x2="297" y1="677.6992" y2="677.6992"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="297" x2="297" y1="677.6992" y2="690.6992"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="256" x2="297" y1="690.6992" y2="690.6992"/><polygon fill="#A80036" points="266,686.6992,256,690.6992,266,694.6992,262,690.6992" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="262" y="657.6465">check formal validity of</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="262" y="672.957">attestation string</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="255" x2="297" y1="720.0098" y2="720.0098"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="297" x2="297" y1="720.0098" y2="733.0098"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="256" x2="297" y1="733.0098" y2="733.0098"/><polygon fill="#A80036" points="266,729.0098,256,733.0098,266,737.0098,262,733.0098" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="262" y="715.2676">check if attestation is active</text><polygon fill="#A80036" points="526,798.6309,536,802.6309,526,806.6309,530,802.6309" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="255" x2="532" y1="802.6309" y2="802.6309"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="262" y="782.5781">get self-set</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="262" y="797.8887">attestation properties</text><path d="M168,817.6309 L242,817.6309 L242,824.6309 L232,834.6309 L168,834.6309 L168,817.6309 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="190.5078" style="stroke: #000000; stroke-width: 2.0;" width="240" x="168" y="817.6309"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="183" y="831.1992">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="138" x="257" y="830.2656">[over found attestations]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="255" x2="297" y1="856.252" y2="856.252"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="297" x2="297" y1="856.252" y2="869.252"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="256" x2="297" y1="869.252" y2="869.252"/><polygon fill="#A80036" points="266,865.252,256,869.252,266,873.252,262,869.252" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="262" y="851.5098">parse attestation</text><path d="M178,884.252 L240,884.252 L240,891.252 L230,901.252 L178,901.252 L178,884.252 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="116.8867" style="stroke: #000000; stroke-width: 2.0;" width="220" x="178" y="884.252"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="193" y="897.8203">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="129" x="255" y="896.8867">[is account deprecated]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="255" x2="297" y1="922.873" y2="922.873"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="297" x2="297" y1="922.873" y2="935.873"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="256" x2="297" y1="935.873" y2="935.873"/><polygon fill="#A80036" points="266,931.873,256,935.873,266,939.873,262,935.873" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="262" y="918.1309">break loop</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="178" x2="398" y1="944.873" y2="944.873"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="132" x="183" y="955.5078">[is account deactivated]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="255" x2="297" y1="980.1387" y2="980.1387"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="297" x2="297" y1="980.1387" y2="993.1387"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="256" x2="297" y1="993.1387" y2="993.1387"/><polygon fill="#A80036" points="266,989.1387,256,993.1387,266,997.1387,262,993.1387" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="262" y="975.3965">stop DID resolution</text><path d="M178,1022.1387 L240,1022.1387 L240,1029.1387 L230,1039.1387 L178,1039.1387 L178,1022.1387 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="59.6211" style="stroke: #000000; stroke-width: 2.0;" width="184" x="178" y="1022.1387"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="193" y="1035.707">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="102" x="255" y="1034.7734">[is account active]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="255" x2="297" y1="1060.7598" y2="1060.7598"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="297" x2="297" y1="1060.7598" y2="1073.7598"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="256" x2="297" y1="1073.7598" y2="1073.7598"/><polygon fill="#A80036" points="266,1069.7598,256,1073.7598,266,1077.7598,262,1073.7598" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="262" y="1056.0176">break loop</text><rect fill="#EEEEEE" filter="url(#f1s37z6r22540o)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1048" x="3" y="1141.415"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1051" y1="1141.415" y2="1141.415"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1051" y1="1144.415" y2="1144.415"/><rect fill="#EEEEEE" filter="url(#f1s37z6r22540o)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="209" x="422.5" y="1130.7598"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="191" x="428.5" y="1147.3281">get DID Document Template</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="255" x2="297" y1="1185.3809" y2="1185.3809"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="297" x2="297" y1="1185.3809" y2="1198.3809"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="256" x2="297" y1="1198.3809" y2="1198.3809"/><polygon fill="#A80036" points="266,1194.3809,256,1198.3809,266,1202.3809,262,1198.3809" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="262" y="1180.6387">extract cloud storage tx hash (txh_s)</text><polygon fill="#A80036" points="946,1223.6914,956,1227.6914,946,1231.6914,950,1227.6914" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="255" x2="952" y1="1227.6914" y2="1227.6914"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="262" y="1222.9492">get did document template (txh_s)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="255" x2="297" y1="1257.002" y2="1257.002"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="297" x2="297" y1="1257.002" y2="1270.002"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="256" x2="297" y1="1270.002" y2="1270.002"/><polygon fill="#A80036" points="266,1266.002,256,1270.002,266,1274.002,262,1270.002" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="269" x="262" y="1252.2598">check if did document template is self-set</text><rect fill="#EEEEEE" filter="url(#f1s37z6r22540o)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1048" x="3" y="1323.6572"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1051" y1="1323.6572" y2="1323.6572"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1051" y1="1326.6572" y2="1326.6572"/><rect fill="#EEEEEE" filter="url(#f1s37z6r22540o)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="162" x="446" y="1313.002"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="144" x="452" y="1329.5703">return DID Document</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="255" x2="297" y1="1367.623" y2="1367.623"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="297" x2="297" y1="1367.623" y2="1380.623"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="256" x2="297" y1="1380.623" y2="1380.623"/><polygon fill="#A80036" points="266,1376.623,256,1380.623,266,1384.623,262,1380.623" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="262" y="1362.8809">prepare DID Document</text><polygon fill="#A80036" points="68,1405.9336,58,1409.9336,68,1413.9336,64,1409.9336" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="62" x2="254" y1="1409.9336" y2="1409.9336"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="74" y="1405.1914">return DID Document</text><!--MD5=[fc9d987787cbd62204ad8bcd3d151257]
@startuml
skinparam BoxPadding 15
skinparam ParticipantPadding 15


participant "Verifier" as USR
participant "DID Resolver" as RES
box "ARDOR Blockchain" #WhiteSmoke
    participant "Account" as ATTE
    participant "New Account" as NATTE
    participant "Tx Resolver" as TXR
    participant "Cloud Storage" as STR
end box


== DID Resolution ==


USR -> RES: read DID (did:bba:<txh_d>)
|||


== parse DID Controller Path ==

loop
    alt is first iteration
        RES -> TXR: get initial attestation transaction (txh_d)
        RES -> RES: store account name
    else
        RES -> RES: store account name
        RES -> NATTE: get initial attestation transaction
        RES -> RES: treat new account\nas current account
    end
    RES -> RES: check if tx is\naccount property
    RES -> RES: check if account\nproperty is self-set
    RES -> RES: check account\nproperty name (didId)
    RES -> RES: check formal validity of\nattestation string
    RES -> RES: check if attestation is active
    |||
    RES -> ATTE: get self-set\nattestation properties
    loop over found attestations
        RES -> RES: parse attestation
        alt is account deprecated
            RES -> RES: break loop
        else is account deactivated
            RES -> RES: stop DID resolution
        end
    end
    alt is account active
        RES -> RES: break loop
    end
end
|||


== get DID Document Template ==

RES -> RES: extract cloud storage tx hash (txh_s)
RES -> STR: get did document template (txh_s)
RES -> RES: check if did document template is self-set 
|||


== return DID Document ==

RES -> RES: prepare DID Document
RES - -> USR: return DID Document


@enduml

PlantUML version 1.2020.10(Sun May 17 11:35:57 CEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.7+10
Operating System: Mac OS X
Default Encoding: UTF-8
Language: en
Country: DE
--></g></svg>