<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1285px" preserveAspectRatio="none" style="width:1050px;height:1285px;" version="1.1" viewBox="0 0 1050 1285" width="1050px" zoomAndPan="magnify"><defs><filter height="300%" id="folb2ihc0sjm4" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#F5F5F5" height="1270.8008" style="stroke: #A80036; stroke-width: 1.0;" width="553" x="469.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125" x="683.5" y="16.5684">ARDOR Blockchain</text><rect fill="#FFFFFF" filter="url(#folb2ihc0sjm4)" height="662.4766" style="stroke: #000000; stroke-width: 2.0;" width="746" x="136.5" y="188.7305"/><rect fill="#FFFFFF" filter="url(#folb2ihc0sjm4)" height="193.1738" style="stroke: #000000; stroke-width: 2.0;" width="716" x="156.5" y="213.041"/><rect fill="#FFFFFF" height="88.9316" style="stroke: none; stroke-width: 1.0;" width="716" x="156.5" y="317.2832"/><rect fill="#FFFFFF" filter="url(#folb2ihc0sjm4)" height="205.8184" style="stroke: #000000; stroke-width: 2.0;" width="269" x="146.5" y="564.7676"/><rect fill="#FFFFFF" filter="url(#folb2ihc0sjm4)" height="116.8867" style="stroke: #000000; stroke-width: 2.0;" width="252" x="156.5" y="646.6992"/><rect fill="#FFFFFF" height="57.2656" style="stroke: none; stroke-width: 1.0;" width="252" x="156.5" y="706.3203"/><rect fill="#FFFFFF" filter="url(#folb2ihc0sjm4)" height="59.6211" style="stroke: #000000; stroke-width: 2.0;" width="225" x="156.5" y="784.5859"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="66" x2="66" y1="58.7988" y2="1236.3125"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="233.5" x2="233.5" y1="58.7988" y2="1236.3125"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="525.5" x2="525.5" y1="58.7988" y2="1236.3125"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="655.5" x2="655.5" y1="58.7988" y2="1236.3125"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="798.5" x2="798.5" y1="58.7988" y2="1236.3125"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="945.5" x2="945.5" y1="58.7988" y2="1236.3125"/><rect fill="#FEFECE" filter="url(#folb2ihc0sjm4)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="23" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="30" y="43.8457">Requester</text><rect fill="#FEFECE" filter="url(#folb2ihc0sjm4)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="23" y="1235.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="30" y="1255.8477">Requester</text><rect fill="#FEFECE" filter="url(#folb2ihc0sjm4)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="181.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="188.5" y="43.8457">DID Resolver</text><rect fill="#FEFECE" filter="url(#folb2ihc0sjm4)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="181.5" y="1235.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="188.5" y="1255.8477">DID Resolver</text><rect fill="#FEFECE" filter="url(#folb2ihc0sjm4)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="488.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="495.5" y="43.8457">Account</text><rect fill="#FEFECE" filter="url(#folb2ihc0sjm4)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="488.5" y="1235.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="495.5" y="1255.8477">Account</text><rect fill="#FEFECE" filter="url(#folb2ihc0sjm4)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="602.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="609.5" y="43.8457">New Account</text><rect fill="#FEFECE" filter="url(#folb2ihc0sjm4)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="602.5" y="1235.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="609.5" y="1255.8477">New Account</text><rect fill="#FEFECE" filter="url(#folb2ihc0sjm4)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="749.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="756.5" y="43.8457">Tx Resolver</text><rect fill="#FEFECE" filter="url(#folb2ihc0sjm4)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="749.5" y="1235.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="756.5" y="1255.8477">Tx Resolver</text><rect fill="#FEFECE" filter="url(#folb2ihc0sjm4)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="887.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="894.5" y="43.8457">Cloud Storage</text><rect fill="#FEFECE" filter="url(#folb2ihc0sjm4)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="887.5" y="1235.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="894.5" y="1255.8477">Cloud Storage</text><polygon fill="#A80036" points="221.5,101.4199,231.5,105.4199,221.5,109.4199,225.5,105.4199" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="227.5" y1="105.4199" y2="105.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="73.5" y="85.3672">request DID resolution</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="73.5" y="100.6777">(did:bba:&lt;txh_d&gt;)</text><rect fill="#EEEEEE" filter="url(#folb2ihc0sjm4)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1035.5" x="3" y="159.0752"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1038.5" y1="159.0752" y2="159.0752"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1038.5" y1="162.0752" y2="162.0752"/><rect fill="#EEEEEE" filter="url(#folb2ihc0sjm4)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="184" x="428.75" y="148.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="166" x="434.75" y="164.9883">DID Attestation Retrieval</text><path d="M136.5,188.7305 L210.5,188.7305 L210.5,195.7305 L200.5,205.7305 L136.5,205.7305 L136.5,188.7305 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="662.4766" style="stroke: #000000; stroke-width: 2.0;" width="746" x="136.5" y="188.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="151.5" y="202.2988">loop</text><path d="M156.5,213.041 L218.5,213.041 L218.5,220.041 L208.5,230.041 L156.5,230.041 L156.5,213.041 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="193.1738" style="stroke: #000000; stroke-width: 2.0;" width="716" x="156.5" y="213.041"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="171.5" y="226.6094">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="233.5" y="225.6758">[is first iteration]</text><polygon fill="#A80036" points="786.5,247.6621,796.5,251.6621,786.5,255.6621,790.5,251.6621" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="792.5" y1="251.6621" y2="251.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="240.5" y="246.9199">get transaction (txh_d)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="275.5" y1="296.2832" y2="296.2832"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275.5" x2="275.5" y1="296.2832" y2="309.2832"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="275.5" y1="309.2832" y2="309.2832"/><polygon fill="#A80036" points="244.5,305.2832,234.5,309.2832,244.5,313.2832,240.5,309.2832" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="240.5" y="276.2305">check if transaction is</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="244.5" y="291.541">DID attestation</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="156.5" x2="872.5" y1="318.2832" y2="318.2832"/><polygon fill="#A80036" points="644,336.5938,654,340.5938,644,344.5938,648,340.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="650" y1="340.5938" y2="340.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="240.5" y="335.8516">get initial DID attestation</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="275.5" y1="385.2148" y2="385.2148"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275.5" x2="275.5" y1="385.2148" y2="398.2148"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="275.5" y1="398.2148" y2="398.2148"/><polygon fill="#A80036" points="244.5,394.2148,234.5,398.2148,244.5,402.2148,240.5,398.2148" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="240.5" y="365.1621">treat new account</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="240.5" y="380.4727">as current account</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="275.5" y1="434.5254" y2="434.5254"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275.5" x2="275.5" y1="434.5254" y2="447.5254"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="275.5" y1="447.5254" y2="447.5254"/><polygon fill="#A80036" points="244.5,443.5254,234.5,447.5254,244.5,451.5254,240.5,447.5254" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="240.5" y="429.7832">check if DID attestation is active</text><polygon fill="#A80036" points="513.5,488.1465,523.5,492.1465,513.5,496.1465,517.5,492.1465" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="519.5" y1="492.1465" y2="492.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="240.5" y="472.0938">get newer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="240.5" y="487.4043">DID attestations</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="275.5" y1="536.7676" y2="536.7676"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275.5" x2="275.5" y1="536.7676" y2="549.7676"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="275.5" y1="549.7676" y2="549.7676"/><polygon fill="#A80036" points="244.5,545.7676,234.5,549.7676,244.5,553.7676,240.5,549.7676" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="240.5" y="516.7148">sort DID attestations</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="240.5" y="532.0254">from oldest to newest</text><path d="M146.5,564.7676 L220.5,564.7676 L220.5,571.7676 L210.5,581.7676 L146.5,581.7676 L146.5,564.7676 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="205.8184" style="stroke: #000000; stroke-width: 2.0;" width="269" x="146.5" y="564.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="161.5" y="578.3359">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127" x="235.5" y="577.4023">[over DID attestations]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="275.5" y1="618.6992" y2="618.6992"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275.5" x2="275.5" y1="618.6992" y2="631.6992"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="275.5" y1="631.6992" y2="631.6992"/><polygon fill="#A80036" points="244.5,627.6992,234.5,631.6992,244.5,635.6992,240.5,631.6992" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="240.5" y="598.6465">treat DID attestation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="240.5" y="613.957">as current DID attestation</text><path d="M156.5,646.6992 L218.5,646.6992 L218.5,653.6992 L208.5,663.6992 L156.5,663.6992 L156.5,646.6992 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="116.8867" style="stroke: #000000; stroke-width: 2.0;" width="252" x="156.5" y="646.6992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="171.5" y="660.2676">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="170" x="233.5" y="659.334">[is DID attestation deprecated]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="275.5" y1="685.3203" y2="685.3203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275.5" x2="275.5" y1="685.3203" y2="698.3203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="275.5" y1="698.3203" y2="698.3203"/><polygon fill="#A80036" points="244.5,694.3203,234.5,698.3203,244.5,702.3203,240.5,698.3203" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="240.5" y="680.5781">break loop</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="156.5" x2="408.5" y1="707.3203" y2="707.3203"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="173" x="161.5" y="717.9551">[is DID attestation deactivated]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="275.5" y1="742.5859" y2="742.5859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275.5" x2="275.5" y1="742.5859" y2="755.5859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="275.5" y1="755.5859" y2="755.5859"/><polygon fill="#A80036" points="244.5,751.5859,234.5,755.5859,244.5,759.5859,240.5,755.5859" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="240.5" y="737.8438">stop DID resolution</text><path d="M156.5,784.5859 L218.5,784.5859 L218.5,791.5859 L208.5,801.5859 L156.5,801.5859 L156.5,784.5859 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="59.6211" style="stroke: #000000; stroke-width: 2.0;" width="225" x="156.5" y="784.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="171.5" y="798.1543">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="143" x="233.5" y="797.2207">[is DID attestation active]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="275.5" y1="823.207" y2="823.207"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275.5" x2="275.5" y1="823.207" y2="836.207"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="275.5" y1="836.207" y2="836.207"/><polygon fill="#A80036" points="244.5,832.207,234.5,836.207,244.5,840.207,240.5,836.207" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="240.5" y="818.4648">break loop</text><rect fill="#EEEEEE" filter="url(#folb2ihc0sjm4)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1035.5" x="3" y="911.5176"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1038.5" y1="911.5176" y2="911.5176"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1038.5" y1="914.5176" y2="914.5176"/><rect fill="#EEEEEE" filter="url(#folb2ihc0sjm4)" height="38.6211" style="stroke: #000000; stroke-width: 2.0;" width="243" x="399.25" y="893.207"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="229" x="405.25" y="909.7754">DID Document Template Retrieval</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147" x="444.25" y="925.0859">(Ardor Cloud Storage)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="275.5" y1="963.1387" y2="963.1387"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275.5" x2="275.5" y1="963.1387" y2="976.1387"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="275.5" y1="976.1387" y2="976.1387"/><polygon fill="#A80036" points="244.5,972.1387,234.5,976.1387,244.5,980.1387,240.5,976.1387" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="240.5" y="958.3965">extract cloud storage tx hash (txh_s)</text><polygon fill="#A80036" points="933.5,1001.4492,943.5,1005.4492,933.5,1009.4492,937.5,1005.4492" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="939.5" y1="1005.4492" y2="1005.4492"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="240.5" y="1000.707">get DID Document Template (txh_s)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="275.5" y1="1050.0703" y2="1050.0703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275.5" x2="275.5" y1="1050.0703" y2="1063.0703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="275.5" y1="1063.0703" y2="1063.0703"/><polygon fill="#A80036" points="244.5,1059.0703,234.5,1063.0703,244.5,1067.0703,240.5,1063.0703" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="278" x="240.5" y="1030.0176">check if DID Document Template is self-set</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="240.5" y="1045.3281">(by one of the found DID controllers)</text><rect fill="#EEEEEE" filter="url(#folb2ihc0sjm4)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1035.5" x="3" y="1116.7256"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1038.5" y1="1116.7256" y2="1116.7256"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1038.5" y1="1119.7256" y2="1119.7256"/><rect fill="#EEEEEE" filter="url(#folb2ihc0sjm4)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="198" x="421.75" y="1106.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="427.75" y="1122.6387">DID Document Preparation</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="233.5" x2="275.5" y1="1176.002" y2="1176.002"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="275.5" x2="275.5" y1="1176.002" y2="1189.002"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="275.5" y1="1189.002" y2="1189.002"/><polygon fill="#A80036" points="244.5,1185.002,234.5,1189.002,244.5,1193.002,240.5,1189.002" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="240.5" y="1155.9492">add DID informations to the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="240.5" y="1171.2598">DID Document Template</text><polygon fill="#A80036" points="77.5,1214.3125,67.5,1218.3125,77.5,1222.3125,73.5,1218.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="71.5" x2="232.5" y1="1218.3125" y2="1218.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="83.5" y="1213.5703">return DID Document</text><!--MD5=[21d91c8679bc94579057d3e7458835da]
@startuml
skinparam BoxPadding 15
skinparam ParticipantPadding 15


participant "Requester" as REQ
participant "DID Resolver" as RES
box "ARDOR Blockchain" #WhiteSmoke
    participant "Account" as ATTE
    participant "New Account" as NATTE
    participant "Tx Resolver" as TXR
    participant "Cloud Storage" as STR
end box



REQ -> RES: request DID resolution\n(did:bba:<txh_d>)
|||


== DID Attestation Retrieval ==

loop
    alt is first iteration
        RES -> TXR: get transaction (txh_d)
        RES -> RES: check if transaction is\n DID attestation
    else
        ' RES -> RES: store account name
        RES -> NATTE: get initial DID attestation
        RES -> RES: treat new account\nas current account
    end

    RES -> RES: check if DID attestation is active
    RES -> ATTE: get newer \nDID attestations
    RES -> RES: sort DID attestations\nfrom oldest to newest

    loop over DID attestations
        RES -> RES: treat DID attestation\nas current DID attestation
        alt is DID attestation deprecated
            RES -> RES: break loop
        else is DID attestation deactivated
            RES -> RES: stop DID resolution
        end
    end
    alt is DID attestation active
        RES -> RES: break loop
    end
end
|||


== DID Document Template Retrieval\n(Ardor Cloud Storage) ==

RES -> RES: extract cloud storage tx hash (txh_s)
RES -> STR: get DID Document Template (txh_s)
RES -> RES: check if DID Document Template is self-set\n(by one of the found DID controllers)
|||


== DID Document Preparation ==

RES -> RES: add DID informations to the\nDID Document Template
RES -> REQ: return DID Document


@enduml

@startuml
skinparam BoxPadding 15
skinparam ParticipantPadding 15


participant "Requester" as REQ
participant "DID Resolver" as RES
box "ARDOR Blockchain" #WhiteSmoke
    participant "Account" as ATTE
    participant "New Account" as NATTE
    participant "Tx Resolver" as TXR
    participant "Cloud Storage" as STR
end box



REQ -> RES: request DID resolution\n(did:bba:<txh_d>)
|||


== DID Attestation Retrieval ==

loop
    alt is first iteration
        RES -> TXR: get transaction (txh_d)
        RES -> RES: check if transaction is\n DID attestation
    else
        RES -> NATTE: get initial DID attestation
        RES -> RES: treat new account\nas current account
    end

    RES -> RES: check if DID attestation is active
    RES -> ATTE: get newer \nDID attestations
    RES -> RES: sort DID attestations\nfrom oldest to newest

    loop over DID attestations
        RES -> RES: treat DID attestation\nas current DID attestation
        alt is DID attestation deprecated
            RES -> RES: break loop
        else is DID attestation deactivated
            RES -> RES: stop DID resolution
        end
    end
    alt is DID attestation active
        RES -> RES: break loop
    end
end
|||


== DID Document Template Retrieval\n(Ardor Cloud Storage) ==

RES -> RES: extract cloud storage tx hash (txh_s)
RES -> STR: get DID Document Template (txh_s)
RES -> RES: check if DID Document Template is self-set\n(by one of the found DID controllers)
|||


== DID Document Preparation ==

RES -> RES: add DID informations to the\nDID Document Template
RES -> REQ: return DID Document


@enduml

PlantUML version 1.2020.10(Sun May 17 11:35:57 CEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.7+10
Operating System: Mac OS X
Default Encoding: UTF-8
Language: en
Country: DE
--></g></svg>